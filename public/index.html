<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sensor UI Websocket Demo</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #38bdf8;
      --muted: #94a3b8;
      --text: #e2e8f0;
      --border: #1f2937;
      --shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(120% 120% at 30% 20%, rgba(56, 189, 248, 0.12), transparent 45%), radial-gradient(120% 120% at 80% 0%, rgba(99, 102, 241, 0.12), transparent 35%), var(--bg);
      color: var(--text);
      font-family: "Helvetica Neue", "Segoe UI", system-ui, -apple-system, sans-serif;
      padding: 24px;
    }

    .card {
      width: min(900px, 100%);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow: hidden;
      backdrop-filter: blur(12px);
    }

    header {
      padding: 18px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      background: rgba(17, 24, 39, 0.7);
    }

    h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.4px;
      font-weight: 600;
    }

    .status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.1);
      color: var(--text);
      border: 1px solid var(--border);
      font-size: 13px;
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--muted);
      box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.12);
      transition: background 0.2s ease;
    }

    .status.connected .status-dot {
      background: #34d399;
    }

    .content {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 0;
    }

    .left, .right {
      padding: 20px;
      background: rgba(17, 24, 39, 0.6);
    }

    .left {
      border-right: 1px solid var(--border);
    }

    .section-title {
      margin: 0 0 12px 0;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    .log {
      height: 360px;
      overflow: auto;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px;
      background: rgba(255, 255, 255, 0.02);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .msg {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(56, 189, 248, 0.05);
      font-size: 14px;
      line-height: 1.5;
    }

    .msg.system {
      background: rgba(148, 163, 184, 0.08);
      color: var(--muted);
    }

    .msg small {
      display: block;
      color: var(--muted);
      font-size: 12px;
      margin-top: 6px;
    }

    form {
      margin-top: 14px;
      display: flex;
      gap: 10px;
    }

    input[type="text"] {
      flex: 1;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.02);
      color: var(--text);
      font-size: 15px;
    }

    button {
      padding: 12px 16px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      color: #0b1221;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
    }

    button:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      margin: 16px 0 0;
    }

    .metric {
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.02);
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .metric span {
      color: var(--muted);
      font-size: 12px;
      letter-spacing: 0.2px;
    }

    .metric strong {
      font-size: 18px;
    }

    .right .panel {
      padding: 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.02);
      font-size: 14px;
      color: var(--muted);
      line-height: 1.6;
    }

    code {
      background: rgba(255, 255, 255, 0.06);
      padding: 2px 6px;
      border-radius: 6px;
      color: var(--text);
    }

    @media (max-width: 900px) {
      .content {
        grid-template-columns: 1fr;
      }

      .left {
        border-right: none;
        border-bottom: 1px solid var(--border);
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <header>
      <h1>Sensor UI Websocket Monitor</h1>
      <div class="status" id="status">
        <span class="status-dot" aria-hidden="true"></span>
        <span class="status-text">Connecting…</span>
      </div>
    </header>
    <div class="content">
      <section class="left">
        <p class="section-title">Live Feed</p>
        <div class="log" id="log"></div>
        <form id="message-form">
          <input type="text" id="message-input" name="message" placeholder="Type a message to broadcast" autocomplete="off" />
          <button type="submit" id="send-btn">Send</button>
        </form>
      </section>
      <section class="right">
        <p class="section-title">Connection details</p>
        <div class="metrics">
          <div class="metric">
            <span>Server</span>
            <strong id="server-url">ws://localhost:3000/ws</strong>
          </div>
          <div class="metric">
            <span>Status</span>
            <strong id="status-label">Connecting…</strong>
          </div>
          <div class="metric">
            <span>Messages received</span>
            <strong id="message-count">0</strong>
          </div>
        </div>
        <div class="panel" style="margin-top: 16px;">
          This page connects to the Node backend via WebSocket. Open multiple tabs to see broadcast messages. When the server echoes what you send, you will see it in the live feed.
        </div>
      </section>
    </div>
  </div>

  <script src="https://unpkg.com/reconnecting-websocket/dist/reconnecting-websocket-iife.js"></script>
  <script src="./app.js"></script>
</body>
</html>
